<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Audio Recording using FlashAudioRecorder</title>
        <script src="../AudioStreamRecorder/FlashAudioRecorder.js"> </script>
    </head>
    <body>
        <h1>
            Memory Leaks with Audio Recording using <a href="https://github.com/streamproc/MediaStreamRecorder"
                                     target="_blank">FlashAudioRecorder</a>
        </h1>
        <p>
            Open Chrome and press Shift+Esc. Then look at your process. Or you can see this data at Timeline tab in Chrome Developer Tools.
        </p>
        <p>
            Memory grows!
        </p>
        <script>
            function start() {
                var flashRecorder = new FlashAudioRecorder();
                    flashRecorder.dataType = 'raw';
                flashRecorder.onstart = function(e) {
                    console.log('start');
                }
                flashRecorder.onstop = function(e) {
                    console.log('stop');
                }
                flashRecorder.ondataavailable = function(e) {
                    console.log('blob captured');
                    e = null;
                }
                flashRecorder.onready = function(e) {
                    console.log('ready');
                }
                flashRecorder.start();
                setTimeout(function(){
                    flashRecorder.stop();
                }, 30000);
            }
            start();
            
        </script>
    </body>
</html>